import './polyfills.server.mjs';
import{a as V,b as k,c as L,e as D,g as R,h as j,i as K,o as B,p as J,r as Q,s as W}from"./chunk-XY22BOHY.mjs";import{$ as M,G as o,H as S,Ha as O,N as d,P as c,Q as E,R as s,S as r,U as _,Ua as T,V as h,W as a,X as l,Y as q,Z as v,_ as C,aa as P,ba as A,da as I,h as b,n as w,o as y,s as f,t as g,xa as F,ya as N,za as x}from"./chunk-HSVFE4SM.mjs";import"./chunk-VVCT4QZE.mjs";function $(t,m){if(t&1){let e=_();s(0,"button",6),h("click",function(){f(e);let i=a();return g(i.loadQuestions())}),l(1," Change questions "),r()}}function U(t,m){t&1&&(s(0,"div"),l(1,"\u0110ang t\u1EA3i b\xE0i t\u1EADp..."),r())}function X(t,m){if(t&1){let e=_();s(0,"label",14)(1,"input",15),A("ngModelChange",function(i){f(e);let p=a().index,u=a(2);return P(u.userAnswers[p],i)||(u.userAnswers[p]=i),g(i)}),r(),l(2),r()}if(t&2){let e=m.$implicit,n=a().index,i=a(2);o(),c("name","q"+n)("value",e),M("ngModel",i.userAnswers[n]),c("disabled",i.submitted),o(),v(" ",e," ")}}function Y(t,m){if(t&1&&(s(0,"div")(1,"span"),l(2),r()()),t&2){let e=a(),n=e.$implicit,i=e.index,p=a(2);o(),E("correct",p.userAnswers[i]===n.answer)("incorrect",p.userAnswers[i]!==n.answer),o(),v(" \u0110\xE1p \xE1n \u0111\xFAng: ",n.answer," ")}}function Z(t,m){if(t&1&&(s(0,"div",10)(1,"div",11),l(2),r(),s(3,"div",12),d(4,X,3,5,"label",13),r(),d(5,Y,3,5,"div",2),r()),t&2){let e=m.$implicit,n=m.index,i=a(2);o(2),C("",n+1,". ",e.question,""),o(2),c("ngForOf",e.options),o(),c("ngIf",i.submitted)}}function tt(t,m){if(t&1){let e=_();s(0,"form",7),h("ngSubmit",function(){f(e);let i=a();return g(i.submit())}),d(1,Z,6,4,"div",8),s(2,"button",9),l(3,"Submit"),r()()}if(t&2){let e=a();o(),c("ngForOf",e.questions),o(),c("disabled",e.submitted)}}function et(t,m){if(t&1&&(s(0,"div",16)(1,"h3"),l(2),r()()),t&2){let e=a();o(2),C("K\u1EBFt qu\u1EA3: ",e.score,"/",e.questions.length,"")}}function it(t,m){if(t&1&&(s(0,"div",17),l(1),r()),t&2){let e=a();o(),q(e.error)}}var z=(()=>{class t{constructor(e){this.geminiService=e,this.questions=[],this.userAnswers=[],this.loading=!1,this.error="",this.submitted=!1,this.score=0}ngOnInit(){this.loadQuestions()}loadQuestions(){this.loading=!0,this.error="",this.questions=[],this.userAnswers=[],this.submitted=!1,this.score=0,this.geminiService.generateContent("H\xE3y t\u1EA1o 10 b\xE0i t\u1EADp tr\u1EAFc nghi\u1EC7m ti\u1EBFng Anh tr\xECnh \u0111\u1ED9 pre-intermediate. M\u1ED7i b\xE0i t\u1EADp l\xE0 m\u1ED9t object JSON v\u1EDBi c\xE1c tr\u01B0\u1EDDng: question (c\xE2u h\u1ECFi), options (m\u1EA3ng 4 \u0111\xE1p \xE1n), answer (\u0111\xE1p \xE1n \u0111\xFAng, l\xE0 1 trong 4 \u0111\xE1p \xE1n). Tr\u1EA3 v\u1EC1 m\u1ED9t m\u1EA3ng JSON.").subscribe({next:n=>{try{let p=(n?.candidates?.[0]?.content?.parts?.[0]?.text||"").match(/\[.*\]/s);if(p){let u=JSON.parse(p[0]);Array.isArray(u)&&u.length?(this.questions=u.slice(0,10),this.userAnswers=new Array(this.questions.length).fill("")):this.error="Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u ph\xF9 h\u1EE3p."}else this.error="Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u ph\xF9 h\u1EE3p."}catch{this.error="L\u1ED7i x\u1EED l\xFD d\u1EEF li\u1EC7u."}this.loading=!1},error:n=>{this.error="L\u1ED7i: "+(n?.error?.error?.message||n.message||"Kh\xF4ng x\xE1c \u0111\u1ECBnh"),this.loading=!1}})}submit(){this.submitted=!0,this.score=this.questions.reduce((e,n,i)=>e+(this.userAnswers[i]===n.answer?1:0),0)}static{this.\u0275fac=function(n){return new(n||t)(S(Q))}}static{this.\u0275cmp=w({type:t,selectors:[["app-practice"]],standalone:!0,features:[I],decls:10,vars:5,consts:[[1,"practice-container"],[3,"click",4,"ngIf"],[4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["class","result",4,"ngIf"],["class","error",4,"ngIf"],[3,"click"],[3,"ngSubmit"],["class","question-block",4,"ngFor","ngForOf"],["type","submit",3,"disabled"],[1,"question-block"],[1,"question"],["fxLayout","row",1,"options"],["fxLayout","row",4,"ngFor","ngForOf"],["fxLayout","row"],["type","radio","required","",3,"ngModelChange","name","value","ngModel","disabled"],[1,"result"],[1,"error"]],template:function(n,i){n&1&&(s(0,"p"),l(1,"practice works!"),r(),s(2,"div",0)(3,"h2"),l(4,"B\xE0i t\u1EADp"),r(),d(5,$,2,0,"button",1)(6,U,2,0,"div",2)(7,tt,4,2,"form",3)(8,et,3,2,"div",4)(9,it,2,1,"div",5),r()),n&2&&(o(5),c("ngIf",i.questions.length&&!i.loading),o(),c("ngIf",i.loading),o(),c("ngIf",i.questions.length),o(),c("ngIf",i.submitted),o(),c("ngIf",i.error))},dependencies:[x,F,N,J,j,V,K,k,L,B,R,D,W],styles:[".question[_ngcontent-%COMP%]{margin:8px 0;font-size:16px}.options[_ngcontent-%COMP%]{display:flex;margin-bottom:16px}.options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:20px;color:#8e9090;font-size:16px;display:flex;flex-direction:row;font-weight:600}"]})}}return t})();var G=[{path:"",component:z}];var _t=(()=>{class t{static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275mod=y({type:t})}static{this.\u0275inj=b({imports:[x,T.forChild(G),O]})}}return t})();export{_t as PracticeModule};
