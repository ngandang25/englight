import{a as G}from"./chunk-CUXPMXL4.js";import{a as J,b as Q,c as W}from"./chunk-ENNJ2CVW.js";import{$ as C,A as S,Ba as N,H as d,J as c,K as M,Ka as T,L as s,M as r,Na as V,O as _,Oa as L,Q as h,Qa as k,R as a,Sa as j,Ta as D,Ua as R,Y as l,Z as P,_ as v,_a as K,aa as E,ab as B,ba as A,ca as q,ea as I,j as b,ja as O,ka as F,la as x,o as y,p as w,s as f,t as g,z as o}from"./chunk-HRAH3HA5.js";function U(t,m){if(t&1){let e=_();s(0,"button",8),h("click",function(){f(e);let n=a();return g(n.loadQuestions())}),l(1," Change to other questions "),r()}}function X(t,m){t&1&&(s(0,"div"),l(1,"\u0110ang t\u1EA3i b\xE0i t\u1EADp..."),r())}function Y(t,m){if(t&1){let e=_();s(0,"label",16)(1,"input",17),q("ngModelChange",function(n){f(e);let p=a().index,u=a(2);return A(u.userAnswers[p],n)||(u.userAnswers[p]=n),g(n)}),r(),l(2),r()}if(t&2){let e=m.$implicit,i=a().index,n=a(2);o(),c("name","q"+i)("value",e),E("ngModel",n.userAnswers[i]),c("disabled",n.submitted),o(),v(" ",e," ")}}function Z(t,m){if(t&1&&(s(0,"div")(1,"span")(2,"strong"),l(3,"\u0110\xE1p \xE1n \u0111\xFAng:"),r(),s(4,"strong",18),l(5),r()()()),t&2){let e=a(),i=e.$implicit,n=e.index,p=a(2);o(),M("correct",p.userAnswers[n]===i.answer)("incorrect",p.userAnswers[n]!==i.answer),o(4),v(" ",i.answer,"")}}function tt(t,m){if(t&1&&(s(0,"div",12)(1,"div",13),l(2),r(),s(3,"div",14),d(4,Y,3,5,"label",15),r(),d(5,Z,6,5,"div",4),r()),t&2){let e=m.$implicit,i=m.index,n=a(2);o(2),C("",i+1,". ",e.question,""),o(2),c("ngForOf",e.options),o(),c("ngIf",n.submitted)}}function et(t,m){if(t&1){let e=_();s(0,"form",9),h("ngSubmit",function(){f(e);let n=a();return g(n.submit())}),d(1,tt,6,4,"div",10),s(2,"button",11),l(3," Submit "),r()()}if(t&2){let e=a();o(),c("ngForOf",e.questions),o(),c("disabled",e.submitted)}}function it(t,m){if(t&1&&(s(0,"div",19)(1,"h3"),l(2),r()()),t&2){let e=a();o(2),C("K\u1EBFt qu\u1EA3: ",e.score,"/",e.questions.length,"")}}function nt(t,m){if(t&1&&(s(0,"div",20),l(1),r()),t&2){let e=a();o(),P(e.error)}}var z=(()=>{class t{constructor(e){this.geminiService=e,this.questions=[],this.userAnswers=[],this.loading=!1,this.error="",this.submitted=!1,this.score=0}ngOnInit(){this.loadQuestions()}loadQuestions(){this.loading=!0,this.error="",this.questions=[],this.userAnswers=[],this.submitted=!1,this.score=0,this.geminiService.generateContent("H\xE3y t\u1EA1o 10 b\xE0i t\u1EADp tr\u1EAFc nghi\u1EC7m ti\u1EBFng Anh tr\xECnh \u0111\u1ED9 pre-intermediate. M\u1ED7i b\xE0i t\u1EADp l\xE0 m\u1ED9t object JSON v\u1EDBi c\xE1c tr\u01B0\u1EDDng: question (c\xE2u h\u1ECFi), options (m\u1EA3ng 4 \u0111\xE1p \xE1n), answer (\u0111\xE1p \xE1n \u0111\xFAng, l\xE0 1 trong 4 \u0111\xE1p \xE1n). Tr\u1EA3 v\u1EC1 m\u1ED9t m\u1EA3ng JSON.").subscribe({next:i=>{try{let p=(i?.candidates?.[0]?.content?.parts?.[0]?.text||"").match(/\[.*\]/s);if(p){let u=JSON.parse(p[0]);Array.isArray(u)&&u.length?(this.questions=u.slice(0,10),this.userAnswers=new Array(this.questions.length).fill("")):this.error="Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u ph\xF9 h\u1EE3p."}else this.error="Kh\xF4ng t\xECm th\u1EA5y d\u1EEF li\u1EC7u ph\xF9 h\u1EE3p."}catch{this.error="L\u1ED7i x\u1EED l\xFD d\u1EEF li\u1EC7u."}this.loading=!1},error:i=>{this.error="L\u1ED7i: "+(i?.error?.error?.message||i.message||"Kh\xF4ng x\xE1c \u0111\u1ECBnh"),this.loading=!1}})}submit(){this.submitted=!0,this.score=this.questions.reduce((e,i,n)=>e+(this.userAnswers[n]===i.answer?1:0),0)}static{this.\u0275fac=function(i){return new(i||t)(S(J))}}static{this.\u0275cmp=y({type:t,selectors:[["app-practice"]],standalone:!0,features:[I],decls:10,vars:5,consts:[[1,"section"],[1,"practice-container"],[1,"header"],["class","button",3,"click",4,"ngIf"],[4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["class","result",4,"ngIf"],["class","error",4,"ngIf"],[1,"button",3,"click"],[3,"ngSubmit"],["class","question-block",4,"ngFor","ngForOf"],["type","submit",1,"button",3,"disabled"],[1,"question-block"],[1,"question"],["fxLayout","row",1,"options"],["fxLayout","row",4,"ngFor","ngForOf"],["fxLayout","row"],["type","radio","required","",3,"ngModelChange","name","value","ngModel","disabled"],[1,"answer"],[1,"result"],[1,"error"]],template:function(i,n){i&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),l(4,"B\xE0i t\u1EADp"),r(),d(5,U,2,0,"button",3),r(),d(6,X,2,0,"div",4)(7,et,4,2,"form",5)(8,it,3,2,"div",6)(9,nt,2,1,"div",7),r()()),i&2&&(o(5),c("ngIf",!n.loading),o(),c("ngIf",n.loading),o(),c("ngIf",n.questions.length),o(),c("ngIf",n.submitted),o(),c("ngIf",n.error))},dependencies:[x,O,F,B,D,T,R,V,L,K,j,k,G],styles:[".question[_ngcontent-%COMP%]{margin:8px 0;font-size:16px}.options[_ngcontent-%COMP%]{display:flex;margin-bottom:16px}.options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:20px;font-style:italic;font-size:16px;display:flex;flex-direction:row;align-items:center}.options[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-right:8px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;column-gap:50px;margin-bottom:16px}.answer[_ngcontent-%COMP%]{color:#0b8769}"]})}}return t})();var H=[{path:"",component:W,canActivate:[Q],children:[{path:"",component:z}]}];var ht=(()=>{class t{static{this.\u0275fac=function(i){return new(i||t)}}static{this.\u0275mod=w({type:t})}static{this.\u0275inj=b({imports:[x,N.forChild(H)]})}}return t})();export{ht as PracticeModule};
